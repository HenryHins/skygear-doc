+++
date = "2015-09-18T17:01:39+08:00"
draft = true
title = "Exporting and Importing Records"

+++

Whole document **NOT IMPLEMENTED**

## Exporting records

`record export` can export records of a database in one single command:

```bash
$ mkdir my-precious-backup
$ ourd-cli record export -o my-precious-backup
ourd-cli: Exported 1130 records.
```

It will dump the whole database into `my-precious-backup`, in a format that is
ready to be [imported]({{< relref "#importing-records" >}}).

By default `record export` also downloads the file of a record's asset field.
Use the option `--skip-asset` to avoid this download and have `record export`
instead written the JSON representation of that asset. `record import` will
work as long as the asset is still being kept in Ourd DB.

### Directory structure

```bash
$ tree my-previous-backup
SHOW THE TREE HERE
```

[Describe the directory structure here]

## Importing records

Use `record import` to import a backup generated by `record export`, or from a
file in concatenated JSON format:

```bash
# importing from exported directory
$ ourd-cli record import my-previous-backup
ourd-cli: Imported 1130 records.

# importing from concatenated JSON
$ ourd-cli record import initial-import/records.json
ourd-cli: Imported 1130 records.
```

### Concatenated JSON

Ref: https://en.wikipedia.org/wiki/JSON_Streaming#Concatenated_JSON

The format of each JSON object is specified in the
[documentation](https://github.com/oursky/ourd-cli#record-import) of `record
import`.

## Handling assets

By default, if the value of an asset field is written in
`@file:<relative_path>` syntax, the location of that asset file is assumed to
be relative to the imported directory / file.
