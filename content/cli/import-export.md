+++
date = "2015-09-18T17:01:39+08:00"
draft = true
title = "Exporting and Importing Records"

+++

Whole document **NOT IMPLEMENTED**

## Exporting records

`record export` can export records of a database in one single command:

```bash
$ mkdir my-precious-backup
$ skycli record export -o my-precious-backup
skycli: Exported 1130 records.
```

It will dump the whole database into `my-precious-backup`, in a format that is
ready to be [imported]({{< relref "#importing-records" >}}).

By default `record export` also downloads the file of a record's asset field.
Use the option `--skip-asset` to avoid this download and have `record export`
instead written the JSON representation of that asset. `record import` will
work as long as the asset is still being kept in Skygear DB.

### Directory structure

```bash
$ tree my-previous-backup
SHOW THE TREE HERE
```

[Describe the directory structure here]

## Importing records

Use `record import` to import a backup generated by `record export`, or from a
file in concatenated JSON format:

```bash
# importing from exported directory
$ skycli record import my-previous-backup
skycli: Imported 1130 records.

# importing from concatenated JSON
$ skycli record import initial-import/records.json
skycli: Imported 1130 records.
```

When importing records, each record found in the file is saved to the
database. If the record to be saved already exists in the database, each
field in the record to be saved will overwrite the respective field in the
existing record.

Existing records and existing fields are not removed before the import
operation. Therefore, records and fields that exist in the database but
not in the file will remain in place.

### Concatenated JSON

Ref: https://en.wikipedia.org/wiki/JSON_Streaming#Concatenated_JSON

The format of each JSON object is specified in the
[documentation](https://github.com/oursky/skycli#record-import) of `record
import`.

## Handling assets

By default, if the value of an asset field is written in
`@file:<relative_path>` syntax, the location of that asset file is assumed to
be relative to the imported directory / file.
